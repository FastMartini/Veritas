<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Core metadata required for a Chrome extension popup -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Veritas</title>

    <!-- Popup-specific styling (isolated from page CSS) -->
    <link rel="stylesheet" href="popup.css" />
  </head>

  <body>
    <!-- Persistent header for branding and system state -->
    <header class="top">
      <div class="brand">
        <!-- Visual brand anchor to reinforce trust and identity -->
        <img src="icons/48.png" alt="Veritas logo" class="logoImg" />
        <h1 class="title">Veritas</h1>
      </div>

      <!-- Real-time system status indicator driven by popup.js -->
      <span id="statusPill" class="pill">Idle</span>
    </header>

    <!-- Primary interaction surface for analysis results -->
    <main class="card">
      <!-- Initial empty-state shown before first successful analysis -->
      <div class="hero" id="heroSection">
        <div class="heroTitle">No analysis yet</div>
        <div class="heroSub">Open an article, then run analysis.</div>
      </div>

      <!-- Single entry point for triggering extraction + analysis -->
      <button id="analyzeBtn" class="primary">Analyze Page</button>

      <!-- Temporary diagnostics to verify client-side extraction correctness -->
      <div id="extractDebug">
        <div id="extractStats"></div>
        <textarea id="extractPreview" readonly></textarea>
      </div>

      <!-- High-level metadata about the analyzed article -->
      <section class="section">
        <button
          class="sectionHdr"
          type="button"
          aria-expanded="false"
          data-target="overviewBody"
        >
          <span>Article Overview</span>
          <span class="chev" aria-hidden="true">▾</span>
        </button>

        <!-- Populated entirely from API response -->
        <div id="overviewBody" class="sectionBody" hidden>
          <div class="row">
            <span class="k">Source</span>
            <span id="sourceValue" class="v">—</span>
          </div>

          <div class="row">
            <span class="k">Publication date</span>
            <span id="pubDateValue" class="v">—</span>
          </div>

          <div class="row">
            <span class="k">Claims detected</span>
            <span id="claimsValue" class="v">0</span>
          </div>
        </div>
      </section>

      <!-- Ranked factual statements extracted from the article body -->
      <section class="section">
        <button
          class="sectionHdr"
          type="button"
          aria-expanded="false"
          data-target="claimsBody"
        >
          <span>Extracted Claims</span>
          <span class="chev" aria-hidden="true">▾</span>
        </button>

        <!-- Ordered list preserves relative importance after ranking -->
        <div id="claimsBody" class="sectionBody" hidden>
          <ol id="claimsList"></ol>
        </div>
      </section>

      <!-- Human-readable summary intended to explain system judgment -->
      <section class="section">
        <button
          class="sectionHdr"
          type="button"
          aria-expanded="false"
          data-target="verdictBody"
        >
          <span>Verdict Summary</span>
          <span class="chev" aria-hidden="true">▾</span>
        </button>

        <!-- Verdict remains provisional until agent-based analysis is wired -->
        <div id="verdictBody" class="sectionBody" hidden>
          <div id="verdictPill" class="verdict">Pending</div>
          <div id="verdictSummary" class="hint">
            Analysis not yet run.
          </div>
        </div>
      </section>
    </main>

    <!-- Secondary actions and versioning -->
    <footer class="foot">
      <button id="settingsBtn" class="linkBtn" type="button">
        Settings
      </button>
      <span class="ver">v1.0.0</span>
    </footer>

    <!-- Popup controller logic -->
    <script src="popup.js"></script>
  </body>
</html>
